<script type="text/javascript">
  RED.nodes.registerType('sse-server', {
    category: 'sse',
    name: 'sse-server',
    color: '#4693c8',
    defaults: {
      name: { value: '', type: 'string' },
      event: { value: '', type: 'string' },
      data: { value: '', type: 'string' },
    },
    align: 'right',
    inputs: 1,
    icon: 'white-globe.svg',
    label: function () {
      return this.name || 'sse-server';
    },
    oneditprepare: function () {
      $("#node-input-data").typedInput({
        type: "json",
        types: ["json"]
      })
    }
  });
</script>

<script type="text/html" data-template-name="sse-server">
  <div class="form-row">
		<label for="node-input-name"><i class="fa fa-font"></i> Name </label>
		<input type="text" id="node-input-name" />
	</div>
	<div class="form-row">
		<label for="node-input-event"><i class="fa fa-wifi"></i> Event </label>
		<input type="text" id="node-input-event" />
	</div>
</div>
<div class="form-row">
  <label for="node-input-data"><i class="fa fa-cube"></i> Data </label>
  <input type="text" id="node-input-data" />
</div>
	<div class="form-tips">
    <p>
      Define an event name and a payload to send to all subscribed clients of this HTTP endpoint. By
      default, `msg.topic` will be used to declare the event's <code>type</code>, <code>msg.payload</code> will be stringified and
      send as the event's <code>data</code> property.
    </p>
    <b>
      This node must always origin from an 'http in' node
    </b>
	</div>
</script>

<script type="text/html" data-help-name="sse-server">
  <h2>SSE Serverside node</h2>
	<p>Open an SSE - event stream to a connected client. This node must originate from a default <code>http-in</code> node.</p>
  <p>
    To connect from a client, you can use the <code>sse-client</code> node from this module or the
    <code>EventSource</code> API.
  </p>

</script>